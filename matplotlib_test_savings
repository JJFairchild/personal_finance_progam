import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from datetime import datetime

# --- Manual Data Input (REPLACE with your data from the image) ---
dates = [
    datetime(2024, 1, 15),
    datetime(2024, 2, 15),
    datetime(2024, 3, 15),
    datetime(2024, 4, 15), # noot goodie goodie
    datetime(2024, 5, 15),
    datetime(2024, 6, 15),
    datetime(2024, 7, 15),
    datetime(2024, 8, 15),
    datetime(2024, 9, 15),
    datetime(2024, 10, 15)
]

savings = [
    100,
    150,
    180,
    200,
    220,
    240,
    260,
    280,
    250,
    270
]

goal = 250


# --- Plotting ---
fig, ax = plt.subplots(figsize=(10, 6))
dates_mpl = mdates.date2num(dates)
print(dates)

# Find the index where savings surpass the goal
goal_index = -1
for i in range(len(savings)):
    if savings[i] >= goal:
        goal_index = i
        break

# Plot savings with color change, handling edge cases
if goal_index != -1:
    ax.plot(dates_mpl[:goal_index + 1], savings[:goal_index + 1], color='red', label='Savings')
    if goal_index < len(dates_mpl) -1: #check if goal is not reached at the last point
        ax.plot(dates_mpl[goal_index + 1:], savings[goal_index + 1:], color='lime', label='Savings (Goal Met)')

else:
    ax.plot(dates_mpl, savings, color='red', label='Savings')

ax.axhline(y=goal, color='yellow', label='Savings Goal')
date_format = mdates.DateFormatter('%Y-%m-%d')
ax.xaxis.set_major_formatter(date_format)
fig.autofmt_xdate()

ax.set_xlabel('Date')
ax.set_ylabel('Savings Amount')
ax.set_title('Savings Goal Progress')
ax.legend()

plt.grid(True)
plt.show()